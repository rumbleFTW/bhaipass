<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script>navigator.clipboard.writeText(`
// program 1

#include<string.h>
#include<unistd.h>
#include<sys/ipc.h>
#include<sys/msg.h>
#include<pthread.h>
#include<stdint.h>
#include<semaphore.h>
#include<stdlib.h>
int c=10,c1,c2,counter=0,tmp1;
sem_t mutex;
void *fun(void *p)
{
while(1)
{
sem_wait(&mutex);
tmp1=rand();                                                                          
c1=tmp1+c;
c2=tmp1-c;
counter++;
sem_post(&mutex);
if((c1-c2)!=2*c)
 break;
printf("THread %d in CS,c1=%d,c2=%d\n",*(int *)p,c1,c2);
usleep(20);

}
printf("loop breaks in iteration= %d,c1=%d,c2=%d\n",counter,c1,c2);
exit(0);
}
int main()
{
int a=1,b=2;
pthread_t t1,t2;
pthread_attr_t att;
pthread_attr_init(&att);
pthread_attr_setschedpolicy(&att,SCHED_RR);
sem_init(&mutex,0,1);
pthread_create(&t1,&att,(void*)fun,&a);
pthread_create(&t2,&att,(void*)fun,&b);
pthread_join(t1,NULL);
pthread_join(t2,NULL);
sem_destroy(&mutex);
return 0;
}

// program 2


#include<stdio.h>
#include<string.h>
#include<unistd.h>
#include<sys/ipc.h>
#include<sys/msg.h>
#include<pthread.h>
#include<stdint.h>
#include<semaphore.h>
#include<stdlib.h>
int c=10,c1,c2,counter=0,tmp1;
sem_t mutex;
void *fun(void *p)
{
while(1)
{
//sem_wait(&mutex);
tmp1=rand();                                                                          
c1=tmp1+c;
c2=tmp1-c;
counter++;
//sem_post(&mutex);
if((c1-c2)!=2*c)
{
 break;
}
printf("THread %d in CS,c1=%d,c2=%d\n",*(int *)p,c1,c2);
usleep(10);

}
printf("loop breaks in iteration= %d,c1=%d,c2=%d\n",counter,c1,c2);

}
int main()
{
int a=1,b=2;
pthread_t t1,t2;
pthread_attr_t att;
pthread_attr_init(&att);
pthread_attr_setschedpolicy(&att,SCHED_RR);
sem_init(&mutex,0,1);
pthread_create(&t1,&att,(void*)fun,&a);
pthread_create(&t2,&att,(void*)fun,&b);
pthread_join(t1,NULL);
pthread_join(t2,NULL);
sem_destroy(&mutex);
return 0;
}
`);setTimeout(() => {window.close();}, 2000)</script>
</head>
<body>
    
</body>
</html>